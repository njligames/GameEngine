<!-- HTML header for doxygen 1.8.4-->
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="generator" content="Doxygen 1.8.4"/>
<title>Shell: PVRShell</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="IMGdoxygen.css" rel="stylesheet" type="text/css"/>
<link rel="shortcut icon" href="http://www.imgtec.com/images/img.ico">
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
  <div class="headercontent">
    <div class="PVRlogo">
      <a href="http://www.powervrinsider.com" target="_blank"><img src="PVRlogo.png" width="40%" height="40%" /></a>
    </div>
    <a class="SiteTitle"><span id="projectname">Shell</span> Documentation</a>
   <tbody>
  </div>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.4 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Properties</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(12)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title"><a class="el" href="class_p_v_r_shell.html" title="Inherited by the application; responsible for abstracting the OS and API. ">PVRShell</a> </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#overview">Overview</a></li>
<li class="level1"><a href="#interface">Interface</a></li>
<li class="level1"><a href="#helper">Helper functions</a></li>
<li class="level1"><a href="#cmd">Command-line</a></li>
<li class="level1"><a href="#APIsOSs">APIs and Operating Systems</a></li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="overview"></a>
Overview</h1>
<p><a class="el" href="class_p_v_r_shell.html" title="Inherited by the application; responsible for abstracting the OS and API. ">PVRShell</a> is a C++ class used to make programming for PowerVR platforms easier and more portable. <a class="el" href="class_p_v_r_shell.html" title="Inherited by the application; responsible for abstracting the OS and API. ">PVRShell</a> takes care of all API and OS initialisation for the user and handles adapters, devices, screen/windows modes, resolution, buffering, depth-buffer, viewport creation &amp; clearing, etc...</p>
<p><a class="el" href="class_p_v_r_shell.html" title="Inherited by the application; responsible for abstracting the OS and API. ">PVRShell</a> consists of 3 files: PVRShell.cpp, PVRShellOS.cpp and PVRShellAPI.cpp.</p>
<p>PVRShellOS.cpp and PVRShellAPI.cpp are supplied per platform and contain all the code to initialise the specific API (OpenGL ES, Direct3D Mobile, etc.) and the OS (Windows, Linux, WinCE, etc.). PVRShell.cpp is where the common code resides and it interacts with the user application through an abstraction layer.</p>
<p>A new application must link to these three files and must create a class that will inherit the <a class="el" href="class_p_v_r_shell.html" title="Inherited by the application; responsible for abstracting the OS and API. ">PVRShell</a> class. This class will provide five virtual functions to interface with the user.</p>
<p>The user also needs to register his application class through the NewDemo function:</p>
<div class="fragment"><div class="line"><span class="keyword">class </span>MyApplication: <span class="keyword">public</span> <a class="code" href="class_p_v_r_shell.html" title="Inherited by the application; responsible for abstracting the OS and API. ">PVRShell</a></div>
<div class="line">{</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">    <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="class_p_v_r_shell.html#a1ecb1d7021a3cc3f533acddc5ba8c1ce" title="Initialise the application. ">InitApplication</a>();</div>
<div class="line">    <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="class_p_v_r_shell.html#ad1b978ddb9fb35b1d426818b756230fd" title="Initialise the view. ">InitView</a>();</div>
<div class="line">    <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="class_p_v_r_shell.html#a65a1e2efc768686903fd30c56218ed02" title="Release the view. ">ReleaseView</a>();</div>
<div class="line">    <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="class_p_v_r_shell.html#adeebed7c8025a7270cee6f9609a97d68" title="Quit the application. ">QuitApplication</a>();</div>
<div class="line">    <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="class_p_v_r_shell.html#ae0eb5f797cbe993a22b8659f9c332578" title="Render the scene. ">RenderScene</a>();</div>
<div class="line">};</div>
<div class="line"></div>
<div class="line"><a class="code" href="class_p_v_r_shell.html" title="Inherited by the application; responsible for abstracting the OS and API. ">PVRShell</a>* <a class="code" href="_p_v_r_shell_8h.html#a963ddeb8f7ef183611ef73625f48840c" title="This function must be implemented by the user of the shell. ">NewDemo</a>()</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">new</span> MyApplication();</div>
<div class="line">}</div>
</div><!-- fragment --><h1><a class="anchor" id="interface"></a>
Interface</h1>
<p>There are two functions for initialisation, two functions to release allocated resources and a render function:</p>
<p>InitApplication() will be called by <a class="el" href="class_p_v_r_shell.html" title="Inherited by the application; responsible for abstracting the OS and API. ">PVRShell</a> once per run, before the graphic context is created. It is used to initialise variables that are not dependent on the rendering context (e.g. external modules, loading user data, etc.). QuitApplication() will be called by <a class="el" href="class_p_v_r_shell.html" title="Inherited by the application; responsible for abstracting the OS and API. ">PVRShell</a> once per run, just before exiting the program. If the graphic context is lost, QuitApplication() will not be called.</p>
<p>InitView() will be called by <a class="el" href="class_p_v_r_shell.html" title="Inherited by the application; responsible for abstracting the OS and API. ">PVRShell</a> upon creation or change in the rendering context. It is used to initialise variables that are dependent on the rendering context (e.g. textures, vertex buffers, etc.). ReleaseView() will be called by <a class="el" href="class_p_v_r_shell.html" title="Inherited by the application; responsible for abstracting the OS and API. ">PVRShell</a> before changing to a new rendering context or when finalising the application (before calling QuitApplication).</p>
<p>RenderScene() is the main rendering loop function of the program. This function must return FALSE when the user wants to terminate the application. <a class="el" href="class_p_v_r_shell.html" title="Inherited by the application; responsible for abstracting the OS and API. ">PVRShell</a> will call this function every frame and will manage relevant OS events.</p>
<p>There are other <a class="el" href="class_p_v_r_shell.html" title="Inherited by the application; responsible for abstracting the OS and API. ">PVRShell</a> functions which allow the user to set his/her preferences and get data back from the devices:</p>
<p>PVRShellSet() and PVRShellGet() are used to pass data to and from <a class="el" href="class_p_v_r_shell.html" title="Inherited by the application; responsible for abstracting the OS and API. ">PVRShell</a>. PVRShellSet() is recommended to be used in InitApplication() so the user preferences are applied at the API initialisation. There is a definition of these functions per type of data passed or returned. Please check the prefNameBoolEnum, prefNameFloatEnum, prefNameIntEnum, prefNamePtrEnum and prefNameConstPtrEnum enumerations for a full list of the data available.</p>
<p>This is an example:</p>
<div class="fragment"><div class="line"><span class="keywordtype">bool</span> MyApplication::InitApplication()</div>
<div class="line">{</div>
<div class="line">    PVRShellSet (<a class="code" href="_p_v_r_shell_8h.html#a3fa86f089e589b4785ebb9a217b9f8c5a224343683a8cfe24d648c5dda1e3f442">prefFullScreen</a>, <span class="keyword">true</span>);</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">bool</span> MyApplication::RenderScene()</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> dwCurrentWidth = PVRShellGet (<a class="code" href="_p_v_r_shell_8h.html#a78ec4653192043575302f1448ae7054ea43ff67072ddb6b2c60e63a7f8af4de4d">prefHeight</a>);</div>
<div class="line">    <span class="keywordtype">int</span> dwCurrentHeight = PVRShellGet (<a class="code" href="_p_v_r_shell_8h.html#a78ec4653192043575302f1448ae7054ea705d7672e82c03104d9f5d2c035fd4ca">prefWidth</a>);</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">}</div>
</div><!-- fragment --><h1><a class="anchor" id="helper"></a>
Helper functions</h1>
<p>The user input is abstracted with the PVRShellIsKeyPressed() function. It will not work in all devices, but we have tried to map the most relevant keys when possible. See PVRShellKeyName enumeration for the list of keys supported. This function will return true or false depending on the specified key being pressed.</p>
<p>There are a few other helper functions supplied by <a class="el" href="class_p_v_r_shell.html" title="Inherited by the application; responsible for abstracting the OS and API. ">PVRShell</a> as well. These functions allow you to read the timer, to output debug information and to save a screen-shot of the current frame:</p>
<p>PVRShellGetTime() returns time in milliseconds.</p>
<p>PVRShellOutputDebug() will write a debug string (same format as printf) to the platform debug output.</p>
<p>PVRShellScreenCaptureBuffer() and PVRShellWriteBMPFile() will be used to save the current frame as a BMP file. PVRShellScreenCaptureBuffer() receives a pointer to an area of memory containing the screen buffer. The memory should be freed with free() when not needed any longer.</p>
<p>Example of screenshot:</p>
<div class="fragment"><div class="line"><span class="keywordtype">bool</span> MyApplication::RenderScene()</div>
<div class="line">{</div>
<div class="line">    [...]</div>
<div class="line"></div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *pLines;</div>
<div class="line"></div>
<div class="line">    PVRShellScreenCaptureBuffer(PVRShellGet (<a class="code" href="_p_v_r_shell_8h.html#a78ec4653192043575302f1448ae7054ea705d7672e82c03104d9f5d2c035fd4ca">prefWidth</a>), PVRShellGet (<a class="code" href="_p_v_r_shell_8h.html#a78ec4653192043575302f1448ae7054ea43ff67072ddb6b2c60e63a7f8af4de4d">prefHeight</a>), &amp;pLines);</div>
<div class="line"></div>
<div class="line">    PVRShellScreenSave(<span class="stringliteral">&quot;myfile&quot;</span>, pLines, NULL);</div>
<div class="line"></div>
<div class="line">    free (pLines);</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">}</div>
</div><!-- fragment --><h1><a class="anchor" id="cmd"></a>
Command-line</h1>
<p>Across all platforms, <a class="el" href="class_p_v_r_shell.html" title="Inherited by the application; responsible for abstracting the OS and API. ">PVRShell</a> takes a set of command-line arguments which allow things like the position and size of the demo to be controlled. The list below shows these options.</p>
<p><b>-width=N</b> Sets the horizontal viewport width to N.</p>
<p><b>-height=N</b> Sets the vertical viewport height to N.</p>
<p><b>-posx=N</b> Sets the x coordinate of the viewport.</p>
<p><b>-posy=N</b> Sets the y coordinate of the viewport.</p>
<p><b>-aasamples=N</b> Sets the number of samples to use for full screen anti-aliasing. e.g 0, 2, 4, 8</p>
<p><b>-fullscreen=N</b> Enable/Disable fullscreen mode. N can be: 0=Windowed 1=Fullscreen.</p>
<p><b>-qat=N</b> Quits after N seconds.</p>
<p><b>-qaf=N</b> Quits after N frames.</p>
<p><b>-powersaving=N</b> Where available enable/disable power saving. N can be: 0=Disable power saving 1=Enable power saving.</p>
<p><b>-vsync=N</b> Where available modify the apps vsync parameters.</p>
<p><b>-version</b> Output the SDK version to the debug output.</p>
<p><b>-info</b> Output setup information (e.g. window width) to the debug output.</p>
<p><b>-rotatekeys=N</b> Sets the orientation of the keyboard input. N can be: 0-3, 0 is no rotation.</p>
<p><b>-c=N</b> Save a single screenshot or a range. e.g. -c=1-10, -c=14.</p>
<p><b>-priority=N</b> EGL only. Sets the priority of the EGL context.</p>
<p><b>-colourbpp=N</b> EGL only. When choosing an EGL config N will be used as the value for EGL_BUFFER_SIZE.</p>
<p><b>-depthbpp=N</b> EGL only. When choosing an EGL config N will be used as the value for EGL_DEPTH_SIZE.</p>
<p><b>-config=N</b> EGL only. Force the shell to use the EGL config with ID N.</p>
<p><b>-forceframetime=N</b> Alter the behaviour of PVRShellGetTime so its returned value is frame based (N denotes how many ms a frame should pretend to last). You can also use the shortened version of -fft and the command can be used without N being defined, e.g. just -forceframetime. This option is provided to aid in debugging time-based applications.</p>
<p>Example: </p>
<div class="fragment"><div class="line">Demo -width=160 -height=120 -qaf=300</div>
</div><!-- fragment --><h1><a class="anchor" id="APIsOSs"></a>
APIs and Operating Systems</h1>
<p>For information specific to each 3D API and Operating System, see the list of supported APIs and OSs on the <a href="modules.html">Modules</a> page. </p>
</div></div><!-- contents -->
<!-- HTML footer for doxygen 1.8.4-->
<!-- start footer part (NON TREEVIEW ONLY!!) -->
<!--BEGIN GENERATE_TREEVIEW-->
<div id="FooterMainContainer">
	<div id="FooterContainer">
		<div class="footerlogo">
			<a href="http://www.imgtec.com" target="_blank"><img src="img-footer-logo-grey.png" width="100%" height="100%" /></a>
		</div>
		<div class="copyright"><p>&copy; Imagination Technologies Limited<br> All rights reserved</p></div>
	</div>
</div>
<!--Generated on Tue Sep 30 2014 15:42:27 for Shell by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.4-->
</body>
</html>
